<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniFlow Pro - Bon de sortie</title>
    <link th:href="@{/css/exit_note.css}" rel="stylesheet" />

</head>
<body>
<div class="header">
    <div class="company-name">UNIFLOW PRO</div>
    <div class="document-title">BON DE SORTIE</div>
</div>

<div class="document-info">
    <div class="document-number" th:text="'N°: ' + ${exitOrderNote.order.id}"></div>
    <div th:text="'Date: ' + ${#dates.format(exitOrderNote.getCreationDate(),'dd/MM/yyyy HH:mm')}"></div>
</div>

<div class="section-container">
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Client :</div>
            <div th:text="${exitOrderNote.order.customer.name}"></div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Région :</div>
            <div th:text="${exitOrderNote.order.customer.commune}"></div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Date commande :</div>
            <div th:text="${#dates.format(exitOrderNote.order.orderDate,'dd/MM/yyyy HH:mm')}"></div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Commercial :</div>
            <div th:text="${exitOrderNote.order.user.firstName} + ' ' + ${exitOrderNote.order.user.lastName}"></div>
        </div>
    </div>
</div>

<div class="section-container">
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Préparé le :</div>
            <div th:text="${#dates.format(exitOrderNote.getCreationDate(),'dd/MM/yyyy HH:mm')}"></div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Préparé par :</div>
            <div th:text="${exitOrderNote.preparedBy.firstName} + ' ' + ${exitOrderNote.preparedBy.lastName}"></div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Livreur :</div>
            <div th:text="${exitOrderNote.deliveryPerson.firstName} + ' ' + ${exitOrderNote.deliveryPerson.lastName}"></div>
        </div>
    </div>
</div>

<table class="products-table">
    <thead>
    <tr>
        <th>Marque</th>
        <th>Modèle</th>
        <th>Couleur</th>
        <th>Pack</th>
        <th class="text-center">Qté</th>
        <th class="text-center">Prix unitaire</th>
        <th class="text-center">Total</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="orderNoteLine : ${exitOrderNote.orderNoteLines}">
        <td th:text="${orderNoteLine.product?.mark}"></td>
        <td th:text="${orderNoteLine.product?.model}"></td>
        <td th:text="${orderNoteLine.product?.color}"></td>
        <td th:text="${orderNoteLine.pack?.name}"></td>
        <td class="text-center" th:text="${orderNoteLine.quantity}"></td>
        <td class="text-center" th:text="${#numbers.formatDecimal(orderNoteLine.price, 1, 'POINT', 2, 'COMMA') + ' DA'}"></td>
        <td class="text-center" th:text="${#numbers.formatDecimal(orderNoteLine.quantity * orderNoteLine.price, 1, 'POINT', 2, 'COMMA') + ' DA'}"></td>
    </tr>
    </tbody>
</table>

<div class="total-section">
    <span>Total général: </span>
    <span class="total-amount" th:text="${#numbers.formatDecimal(exitOrderNote.totalPrice, 1, 'POINT', 2, 'COMMA') + ' DA'}"></span>
</div>

<div class="signature-section">
    <div class="signature-box">
        <div class="signature-line"></div>
        <div>Signature préparateur</div>
    </div>
    <div class="signature-box">
        <div class="signature-line"></div>
        <div>Signature client</div>
    </div>
</div>

<div class="footer">
    <div>Document généré le <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy HH:mm')}"></span></div>
    <div>UniFlow Pro - Système de gestion commerciale</div>
</div>

<div  style="margin-top: 30px; text-align: center;">
    <button onclick="window.print()" style="padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Imprimer ce bon
    </button>
</div>
</body>
</html>